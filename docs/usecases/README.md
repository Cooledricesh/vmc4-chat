# Cokaotalk MVP Usecase 문서 목록

**프로젝트:** Cokaotalk MVP (v1.2)
**작성일:** 2025-10-19
**총 Usecase 수:** 12개

---

## 📋 개요

이 디렉토리는 Cokaotalk MVP의 모든 기능에 대한 상세한 usecase 문서를 포함합니다. 각 usecase는 유저플로우 문서를 기반으로 작성되었으며, 사전 조건, 정상 시나리오, 예외 처리, 사후 조건, 비기능적 요구사항, UI/UX 요구사항, API 명세, 테스트 시나리오 등을 포함합니다.

---

## 🔐 인증 관련 Usecase (3개)

### [UC-001: 회원가입](./001_signup.md)
- **기능:** 이메일, 비밀번호, 닉네임을 입력하여 계정 생성
- **주요 특징:**
  - bcrypt 비밀번호 해싱
  - 이메일 중복 검증
  - 자동 로그인 페이지 리디렉션
- **관련 테이블:** users

### [UC-002: 로그인](./002_login.md)
- **기능:** 이메일과 비밀번호로 인증 및 JWT 토큰 발급
- **주요 특징:**
  - JWT 토큰 발급 및 HTTP-only 쿠키 저장
  - bcrypt 비밀번호 검증
  - 메인 페이지 자동 리디렉션
- **관련 테이블:** users

### [UC-012: 비로그인 접근 제한](./012_auth_guard.md)
- **기능:** 보호된 페이지에 대한 인증 확인 및 리디렉션
- **주요 특징:**
  - Next.js 미들웨어 기반 라우트 가드
  - 토큰 검증 및 만료 처리
  - 원래 URL 저장 및 로그인 후 복귀
- **관련 페이지:** /, /room/:id, /mypage

---

## 💬 채팅방 관련 Usecase (2개)

### [UC-003: 채팅방 만들기](./003_create_room.md)
- **기능:** 새로운 채팅방 생성 및 자동 입장
- **주요 특징:**
  - 채팅방 이름 설정 (1-100자)
  - 생성자 자동 참여자 등록
  - WebSocket 실시간 목록 업데이트
- **관련 테이블:** rooms, room_participants

### [UC-004: 채팅방 입장](./004_join_room.md)
- **기능:** 채팅방 선택 또는 URL로 입장
- **주요 특징:**
  - 메시지 히스토리 로드 (최근 50개)
  - 참여자 목록 조회
  - WebSocket 채널 구독
  - 입장 알림 브로드캐스트
- **관련 테이블:** rooms, room_participants, messages

---

## 📨 메시지 관련 Usecase (4개)

### [UC-005: 메시지 전송](./005_send_message.md)
- **기능:** 텍스트/이모지 메시지 작성 및 전송
- **주요 특징:**
  - 낙관적 업데이트 (즉시 UI 반영)
  - 한글 IME 조합 처리
  - WebSocket 실시간 브로드캐스트
  - 오프라인 큐잉 및 자동 재전송
- **관련 테이블:** messages

### [UC-006: 메시지 좋아요](./006_like_message.md)
- **기능:** 메시지에 좋아요 추가/취소 (토글)
- **주요 특징:**
  - 낙관적 업데이트
  - 자신의 메시지 좋아요 차단
  - 실시간 카운트 업데이트
  - 좋아요한 사용자 목록 툴팁
- **관련 테이블:** message_reactions

### [UC-007: 메시지 답장](./007_reply_message.md)
- **기능:** 특정 메시지에 답장 작성
- **주요 특징:**
  - 답장 대상 메시지 미리보기
  - 원본 메시지와 시각적 연결
  - 답장의 답장 허용 (무한 체인)
  - 삭제된 메시지 답장 가능
- **관련 테이블:** messages (parent_message_id)

### [UC-008: 메시지 삭제](./008_delete_message.md)
- **기능:** 자신이 작성한 메시지 삭제 (Soft delete)
- **주요 특징:**
  - Soft delete (is_deleted 플래그)
  - 메시지 내용 보존 (감사 목적)
  - 답장 관계 유지
  - 작성자 본인만 삭제 가능
- **관련 테이블:** messages

---

## 👤 사용자 관리 Usecase (3개)

### [UC-009: 닉네임 변경](./009_change_nickname.md)
- **기능:** 마이페이지에서 닉네임 변경
- **주요 특징:**
  - 실시간 유효성 검증 (1-50자)
  - JWT 토큰 재발급
  - 전역 상태 즉시 업데이트
  - 과거 메시지는 이전 닉네임 유지
- **관련 테이블:** users

### [UC-010: 비밀번호 변경](./010_change_password.md)
- **기능:** 마이페이지에서 비밀번호 변경
- **주요 특징:**
  - 기존 비밀번호 확인 필수
  - bcrypt 해싱 (솔트 라운드 10)
  - 연속 실패 제한 (5회, 5분 차단)
  - 현재 세션 유지
- **관련 테이블:** users

### [UC-011: 로그아웃](./011_logout.md)
- **기능:** 세션 종료 및 로그아웃
- **주요 특징:**
  - 모든 클라이언트 인증 정보 삭제
  - HTTP-only 쿠키 삭제
  - WebSocket 연결 종료
  - 다중 탭 동기화
- **관련 작업:** 전역 상태 초기화, 캐시 초기화

---

## 📊 Usecase 분류

### 인증 흐름
1. UC-001: 회원가입
2. UC-002: 로그인
3. UC-011: 로그아웃
4. UC-012: 비로그인 접근 제한

### 채팅 흐름
1. UC-003: 채팅방 만들기
2. UC-004: 채팅방 입장
3. UC-005: 메시지 전송
4. UC-006: 메시지 좋아요
5. UC-007: 메시지 답장
6. UC-008: 메시지 삭제

### 사용자 관리 흐름
1. UC-009: 닉네임 변경
2. UC-010: 비밀번호 변경

---

## 🔗 관련 문서

- [Product Requirement Document (PRD)](../prd.md)
- [유저플로우 문서](../userflow.md)
- [데이터베이스 설계](../database.md)
- [상태 관리 설계](../state-management.md)
- [요구사항 문서](../requirements.md)

---

## 📝 Usecase 문서 구조

각 usecase 문서는 다음 섹션을 포함합니다:

1. **개요:** 기능에 대한 간단한 설명
2. **사전 조건:** 기능 실행 전 만족해야 할 조건
3. **액터:** 기능에 관여하는 주체 (사용자, 시스템 등)
4. **기본 시나리오:** 정상적인 실행 흐름
5. **대체 시나리오:** 예외 상황 및 오류 처리
6. **사후 조건:** 기능 실행 후 시스템 상태
7. **비기능적 요구사항:** 성능, 보안, 사용성 등
8. **UI/UX 요구사항:** 사용자 인터페이스 상세
9. **데이터베이스 영향:** 생성/수정/조회되는 레코드
10. **API 명세:** 엔드포인트, 요청/응답 형식
11. **상태 관리:** Context/Zustand/React Query 처리
12. **테스트 시나리오:** 검증해야 할 케이스 목록
13. **관련 문서:** 참고 링크

---

## 🎯 사용 목적

이 usecase 문서들은 다음 용도로 활용됩니다:

1. **개발 가이드:** 개발자가 기능을 구현할 때 참고
2. **테스트 명세:** QA 엔지니어가 테스트 케이스 작성 시 참고
3. **API 문서:** 프론트엔드/백엔드 협업 시 API 명세 확인
4. **요구사항 추적:** 기획 요구사항이 정확히 구현되었는지 검증
5. **유지보수:** 기능 수정 또는 확장 시 현재 동작 이해

---

## 📈 진행 상황

| Usecase | 문서 작성 | 구현 | 테스트 | 배포 |
|---------|----------|------|--------|------|
| UC-001 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-002 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-003 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-004 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-005 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-006 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-007 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-008 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-009 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-010 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-011 | ✅ | ⬜ | ⬜ | ⬜ |
| UC-012 | ✅ | ⬜ | ⬜ | ⬜ |

---

## 📅 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|-----|------|----------|--------|
| v1.0 | 2025-10-19 | 전체 12개 usecase 문서 초기 작성 | 승현 |

---

**© 2025 Cokaotalk MVP Project**
